import React from 'react';

/* ------------------------------------------------------------------ */
/* Button                                                              */
/* ------------------------------------------------------------------ */

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'danger' | 'ghost';
  size?: 'sm' | 'md' | 'lg';
  isLoading?: boolean;
}

export function Button({
  children,
  variant = 'primary',
  size = 'md',
  isLoading = false,
  disabled,
  className = '',
  ...props
}: ButtonProps) {
  const baseClasses =
    'inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';

  const variantClasses: Record<string, string> = {
    primary: 'bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500',
    secondary:
      'bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-500 border border-gray-300',
    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',
    ghost: 'text-gray-700 hover:bg-gray-100 focus:ring-gray-500',
  };

  const sizeClasses: Record<string, string> = {
    sm: 'px-3 py-1.5 text-sm',
    md: 'px-4 py-2 text-sm',
    lg: 'px-6 py-3 text-base',
  };

  return React.createElement(
    'button',
    {
      className: `${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`,
      disabled: disabled || isLoading,
      ...props,
    },
    isLoading
      ? React.createElement(
          React.Fragment,
          null,
          React.createElement(LoadingSpinner, { size: 'sm', className: 'mr-2' }),
          'Loading...'
        )
      : children
  );
}

/* ------------------------------------------------------------------ */
/* Input                                                               */
/* ------------------------------------------------------------------ */

interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label?: string;
  error?: string;
  helperText?: string;
}

export const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ label, error, helperText, className = '', id, ...props }, ref) => {
    const inputId = id || `input-${label?.toLowerCase().replace(/\s+/g, '-') || 'field'}`;
    const baseClasses =
      'block w-full rounded-lg border px-3 py-2 text-sm shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-0';
    const stateClasses = error
      ? 'border-red-300 focus:border-red-500 focus:ring-red-500'
      : 'border-gray-300 focus:border-primary-500 focus:ring-primary-500';

    return React.createElement(
      'div',
      { className: 'space-y-1' },
      label &&
        React.createElement(
          'label',
          {
            htmlFor: inputId,
            className: 'block text-sm font-medium text-gray-700',
          },
          label
        ),
      React.createElement('input', {
        ref,
        id: inputId,
        className: `${baseClasses} ${stateClasses} ${className}`,
        ...props,
      }),
      error &&
        React.createElement(
          'p',
          { className: 'text-sm text-red-600', role: 'alert' },
          error
        ),
      helperText &&
        !error &&
        React.createElement(
          'p',
          { className: 'text-sm text-gray-500' },
          helperText
        )
    );
  }
);
Input.displayName = 'Input';

/* ------------------------------------------------------------------ */
/* Modal                                                               */
/* ------------------------------------------------------------------ */

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title: string;
  children: React.ReactNode;
  size?: 'sm' | 'md' | 'lg';
}

export function Modal({
  isOpen,
  onClose,
  title,
  children,
  size = 'md',
}: ModalProps) {
  if (!isOpen) return null;

  const sizeClasses: Record<string, string> = {
    sm: 'max-w-sm',
    md: 'max-w-lg',
    lg: 'max-w-2xl',
  };

  return React.createElement(
    'div',
    {
      className: 'fixed inset-0 z-50 flex items-center justify-center',
      role: 'dialog',
      'aria-modal': true,
      'aria-labelledby': 'modal-title',
    },
    React.createElement('div', {
      className: 'fixed inset-0 bg-black/50 transition-opacity',
      onClick: onClose,
      'aria-hidden': true,
    }),
    React.createElement(
      'div',
      {
        className: `relative bg-white rounded-xl shadow-xl ${sizeClasses[size]} w-full mx-4 p-6`,
      },
      React.createElement(
        'div',
        { className: 'flex items-center justify-between mb-4' },
        React.createElement(
          'h2',
          { id: 'modal-title', className: 'text-lg font-semibold text-gray-900' },
          title
        ),
        React.createElement(
          'button',
          {
            onClick: onClose,
            className: 'text-gray-400 hover:text-gray-600 transition-colors',
            'aria-label': 'Close modal',
          },
          React.createElement(
            'svg',
            {
              className: 'w-5 h-5',
              fill: 'none',
              viewBox: '0 0 24 24',
              stroke: 'currentColor',
            },
            React.createElement('path', {
              strokeLinecap: 'round',
              strokeLinejoin: 'round',
              strokeWidth: 2,
              d: 'M6 18L18 6M6 6l12 12',
            })
          )
        )
      ),
      children
    )
  );
}

/* ------------------------------------------------------------------ */
/* Card                                                                */
/* ------------------------------------------------------------------ */

interface CardProps {
  children: React.ReactNode;
  className?: string;
  padding?: 'none' | 'sm' | 'md' | 'lg';
}

export function Card({ children, className = '', padding = 'md' }: CardProps) {
  const paddingClasses: Record<string, string> = {
    none: '',
    sm: 'p-3',
    md: 'p-5',
    lg: 'p-8',
  };

  return React.createElement(
    'div',
    {
      className: `bg-white rounded-xl border border-gray-200 shadow-sm ${paddingClasses[padding]} ${className}`,
    },
    children
  );
}

/* ------------------------------------------------------------------ */
/* LoadingSpinner                                                      */
/* ------------------------------------------------------------------ */

interface LoadingSpinnerProps {
  size?: 'sm' | 'md' | 'lg';
  className?: string;
}

export function LoadingSpinner({ size = 'md', className = '' }: LoadingSpinnerProps) {
  const sizeClasses: Record<string, string> = {
    sm: 'w-4 h-4',
    md: 'w-8 h-8',
    lg: 'w-12 h-12',
  };

  return React.createElement(
    'div',
    { className: `flex items-center justify-center ${className}`, role: 'status' },
    React.createElement(
      'svg',
      {
        className: `animate-spin text-primary-600 ${sizeClasses[size]}`,
        xmlns: 'http://www.w3.org/2000/svg',
        fill: 'none',
        viewBox: '0 0 24 24',
      },
      React.createElement('circle', {
        className: 'opacity-25',
        cx: '12',
        cy: '12',
        r: '10',
        stroke: 'currentColor',
        strokeWidth: '4',
      }),
      React.createElement('path', {
        className: 'opacity-75',
        fill: 'currentColor',
        d: 'M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z',
      })
    ),
    React.createElement('span', { className: 'sr-only' }, 'Loading...')
  );
}

/* ------------------------------------------------------------------ */
/* ErrorMessage                                                        */
/* ------------------------------------------------------------------ */

interface ErrorMessageProps {
  message: string;
  onRetry?: () => void;
  className?: string;
}

export function ErrorMessage({ message, onRetry, className = '' }: ErrorMessageProps) {
  return React.createElement(
    'div',
    {
      className: `bg-red-50 border border-red-200 rounded-lg p-4 ${className}`,
      role: 'alert',
    },
    React.createElement(
      'div',
      { className: 'flex items-start gap-3' },
      React.createElement(
        'svg',
        {
          className: 'w-5 h-5 text-red-600 mt-0.5 shrink-0',
          fill: 'none',
          viewBox: '0 0 24 24',
          stroke: 'currentColor',
        },
        React.createElement('path', {
          strokeLinecap: 'round',
          strokeLinejoin: 'round',
          strokeWidth: 2,
          d: 'M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z',
        })
      ),
      React.createElement(
        'div',
        { className: 'flex-1' },
        React.createElement(
          'p',
          { className: 'text-sm text-red-800' },
          message
        ),
        onRetry &&
          React.createElement(
            'button',
            {
              onClick: onRetry,
              className:
                'mt-2 text-sm font-medium text-red-600 hover:text-red-800 transition-colors',
            },
            'Try again'
          )
      )
    )
  );
}
